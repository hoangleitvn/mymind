<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Foundation - Engineering Decision Journal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      /* Brand */
      --brand-50: #ecfdf5;
      --brand-100: #d1fae5;
      --brand-200: #a7f3d0;
      --brand-400: #10b981;
      --brand-500: #00a86b;
      --brand-600: #008553;
      --brand-700: #007a4c;
      --brand-800: #065f46;

      /* Base */
      --base-50: #f9fafb;
      --base-100: #f1f5f9;
      --base-200: #e5e7eb;
      --base-300: #d1d5db;
      --base-400: #9ca3af;
      --base-500: #6b7280;
      --base-600: #4b5563;
      --base-700: #374151;
      --base-800: #1f2937;
      --base-900: #111827;

      /* Status */
      --status-proposed: #f59e0b;
      --status-proposed-bg: #fef3c7;
      --status-accepted: #00a86b;
      --status-accepted-bg: #d1fae5;
      --status-deprecated: #ef4444;
      --status-deprecated-bg: #fee2e2;
      --status-superseded: #8b5cf6;
      --status-superseded-bg: #ede9fe;

      /* Typography */
      --font-display: 'Poppins', system-ui, sans-serif;
      --font-body: 'Inter', system-ui, sans-serif;
      --font-mono: 'JetBrains Mono', monospace;

      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;

      /* Radius */
      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-full: 9999px;

      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.05);
      --shadow-md: 0 4px 6px -1px rgba(0,0,0,0.1);
      --shadow-lg: 0 10px 15px -3px rgba(0,0,0,0.1);

      /* Theme (light) */
      --bg-app: var(--base-100);
      --bg-card: white;
      --bg-elevated: white;
      --bg-input: white;
      --text-primary: var(--base-800);
      --text-secondary: var(--base-500);
      --text-muted: var(--base-400);
      --border: var(--base-200);
      --border-strong: var(--base-300);
    }

    [data-theme="dark"] {
      --bg-app: var(--base-900);
      --bg-card: var(--base-800);
      --bg-elevated: var(--base-700);
      --bg-input: var(--base-700);
      --text-primary: var(--base-50);
      --text-secondary: var(--base-400);
      --text-muted: var(--base-500);
      --border: var(--base-700);
      --border-strong: var(--base-600);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    body {
      font-family: var(--font-body);
      background: var(--bg-app);
      color: var(--text-primary);
      line-height: 1.5;
      display: flex;
      flex-direction: column;
    }

    /* Layout */
    .app {
      display: flex;
      flex-direction: column;
      height: 100%;
    }

    .header {
      background: var(--base-800);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .accent-bar {
      height: 4px;
      background: var(--brand-500);
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: var(--space-md) var(--space-lg);
      max-width: 1400px;
      margin: 0 auto;
      width: 100%;
    }

    .logo {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      text-decoration: none;
      cursor: pointer;
    }

    .logo-mark {
      width: 32px;
      height: 32px;
      background: var(--brand-500);
      border-radius: var(--radius-sm);
      display: flex;
      align-items: center;
      justify-content: center;
      font-family: var(--font-display);
      font-weight: 700;
      font-size: 12px;
      color: white;
    }

    .logo-text {
      font-family: var(--font-display);
      font-size: 18px;
      font-weight: 700;
      color: var(--base-50);
    }

    .header-nav {
      display: none;
      gap: var(--space-xs);
    }

    @media (min-width: 768px) {
      .header-nav {
        display: flex;
      }
    }

    .nav-btn {
      background: none;
      border: none;
      color: var(--base-400);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 500;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      cursor: pointer;
      transition: all 0.2s;
    }

    .nav-btn:hover {
      background: var(--base-700);
      color: var(--base-50);
    }

    .nav-btn.active {
      background: var(--brand-800);
      color: var(--brand-400);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    .icon-btn {
      background: var(--base-700);
      border: none;
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      color: var(--base-300);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 18px;
      transition: all 0.2s;
    }

    .icon-btn:hover {
      background: var(--base-600);
      color: var(--base-50);
    }

    .btn-new {
      background: var(--brand-600);
      color: white;
      border: none;
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      transition: all 0.2s;
    }

    .btn-new:hover {
      background: var(--brand-700);
    }

    /* Main Content */
    .main {
      flex: 1;
      overflow-y: auto;
      padding: var(--space-lg);
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    /* Page Views */
    .view {
      display: none;
    }

    .view.active {
      display: block;
      animation: fadeIn 0.2s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Dashboard */
    .page-header {
      margin-bottom: var(--space-xl);
    }

    .page-title {
      font-family: var(--font-display);
      font-size: 28px;
      font-weight: 700;
      margin-bottom: var(--space-xs);
    }

    .page-subtitle {
      font-size: 14px;
      color: var(--text-secondary);
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
    }

    @media (min-width: 640px) {
      .stats-grid {
        grid-template-columns: repeat(4, 1fr);
      }
    }

    .stat-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      padding: var(--space-lg);
      border: 1px solid var(--border);
    }

    .stat-value {
      font-family: var(--font-display);
      font-size: 32px;
      font-weight: 700;
      color: var(--brand-500);
      line-height: 1;
      margin-bottom: var(--space-xs);
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-secondary);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-md);
    }

    .section-title {
      font-family: var(--font-display);
      font-size: 18px;
      font-weight: 700;
    }

    .section-link {
      font-size: 13px;
      color: var(--brand-600);
      text-decoration: none;
      font-weight: 500;
      cursor: pointer;
    }

    [data-theme="dark"] .section-link {
      color: var(--brand-400);
    }

    /* Decision Cards */
    .decision-list {
      display: flex;
      flex-direction: column;
      gap: var(--space-md);
    }

    .decision-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
      cursor: pointer;
      transition: all 0.2s;
    }

    .decision-card:hover {
      border-color: var(--brand-500);
      box-shadow: var(--shadow-md);
    }

    .decision-accent {
      height: 4px;
      background: var(--brand-500);
    }

    .decision-content {
      padding: var(--space-lg);
    }

    .decision-header {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: var(--space-md);
      margin-bottom: var(--space-sm);
    }

    .decision-id {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: var(--space-xs);
    }

    .decision-title {
      font-size: 16px;
      font-weight: 600;
      line-height: 1.3;
    }

    .decision-summary {
      font-size: 14px;
      color: var(--text-secondary);
      margin-bottom: var(--space-md);
      display: -webkit-box;
      -webkit-line-clamp: 2;
      -webkit-box-orient: vertical;
      overflow: hidden;
    }

    .decision-meta {
      display: flex;
      align-items: center;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .decision-date {
      font-size: 12px;
      color: var(--text-muted);
    }

    .decision-tags {
      display: flex;
      gap: var(--space-xs);
      flex-wrap: wrap;
    }

    .tag {
      padding: 4px 10px;
      border-radius: var(--radius-full);
      font-size: 11px;
      font-weight: 500;
    }

    .tag-category {
      background: var(--base-100);
      color: var(--text-secondary);
    }

    [data-theme="dark"] .tag-category {
      background: var(--base-600);
      color: var(--base-200);
    }

    .status-badge {
      padding: 4px 10px;
      border-radius: var(--radius-full);
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .status-proposed {
      background: var(--status-proposed-bg);
      color: var(--status-proposed);
    }

    .status-accepted {
      background: var(--status-accepted-bg);
      color: var(--status-accepted);
    }

    .status-deprecated {
      background: var(--status-deprecated-bg);
      color: var(--status-deprecated);
    }

    .status-superseded {
      background: var(--status-superseded-bg);
      color: var(--status-superseded);
    }

    /* Search & Filters */
    .search-bar {
      display: flex;
      gap: var(--space-md);
      margin-bottom: var(--space-lg);
      flex-wrap: wrap;
    }

    .search-input-wrapper {
      flex: 1;
      min-width: 200px;
      position: relative;
    }

    .search-icon {
      position: absolute;
      left: 14px;
      top: 50%;
      transform: translateY(-50%);
      color: var(--text-muted);
      font-size: 16px;
    }

    .search-input {
      width: 100%;
      padding: 12px 14px 12px 42px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      background: var(--bg-input);
      color: var(--text-primary);
      transition: all 0.2s;
    }

    .search-input:focus {
      outline: none;
      border-color: var(--brand-500);
      box-shadow: 0 0 0 3px var(--brand-100);
    }

    [data-theme="dark"] .search-input:focus {
      box-shadow: 0 0 0 3px var(--brand-800);
    }

    .filter-select {
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      background: var(--bg-input);
      color: var(--text-primary);
      cursor: pointer;
      min-width: 140px;
    }

    .filter-select:focus {
      outline: none;
      border-color: var(--brand-500);
    }

    /* Decision Detail */
    .detail-header {
      margin-bottom: var(--space-xl);
    }

    .detail-back {
      display: inline-flex;
      align-items: center;
      gap: var(--space-xs);
      font-size: 14px;
      color: var(--text-secondary);
      text-decoration: none;
      margin-bottom: var(--space-md);
      cursor: pointer;
    }

    .detail-back:hover {
      color: var(--brand-600);
    }

    .detail-title-row {
      display: flex;
      align-items: flex-start;
      justify-content: space-between;
      gap: var(--space-md);
      flex-wrap: wrap;
    }

    .detail-title {
      font-family: var(--font-display);
      font-size: 28px;
      font-weight: 700;
      line-height: 1.2;
    }

    .detail-actions {
      display: flex;
      gap: var(--space-sm);
    }

    .btn-secondary {
      background: transparent;
      color: var(--text-secondary);
      border: 1px solid var(--border-strong);
      padding: var(--space-sm) var(--space-md);
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-secondary:hover {
      border-color: var(--text-secondary);
      color: var(--text-primary);
    }

    .detail-meta {
      display: flex;
      align-items: center;
      gap: var(--space-lg);
      margin-top: var(--space-md);
      flex-wrap: wrap;
    }

    .detail-meta-item {
      display: flex;
      align-items: center;
      gap: var(--space-xs);
      font-size: 14px;
      color: var(--text-secondary);
    }

    .detail-body {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .detail-section {
      padding: var(--space-lg);
      border-bottom: 1px solid var(--border);
    }

    .detail-section:last-child {
      border-bottom: none;
    }

    .detail-section-title {
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      color: var(--text-muted);
      margin-bottom: var(--space-md);
    }

    .detail-section-content {
      font-size: 15px;
      line-height: 1.7;
    }

    .detail-section-content p {
      margin-bottom: var(--space-md);
    }

    .detail-section-content p:last-child {
      margin-bottom: 0;
    }

    .detail-section-content ul {
      margin-left: var(--space-lg);
      margin-bottom: var(--space-md);
    }

    .detail-section-content li {
      margin-bottom: var(--space-xs);
    }

    .related-decisions {
      display: grid;
      gap: var(--space-sm);
    }

    .related-link {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      padding: var(--space-sm) var(--space-md);
      background: var(--bg-app);
      border-radius: var(--radius-md);
      text-decoration: none;
      color: var(--text-primary);
      font-size: 14px;
      transition: all 0.2s;
    }

    .related-link:hover {
      background: var(--brand-50);
    }

    [data-theme="dark"] .related-link:hover {
      background: var(--brand-800);
    }

    .related-id {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--brand-600);
    }

    [data-theme="dark"] .related-id {
      color: var(--brand-400);
    }

    /* New Decision Form */
    .form-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .form-accent {
      height: 4px;
      background: var(--brand-500);
    }

    .form-content {
      padding: var(--space-xl);
    }

    .form-group {
      margin-bottom: var(--space-lg);
    }

    .form-label {
      display: block;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: var(--space-sm);
    }

    .form-hint {
      font-size: 13px;
      color: var(--text-muted);
      margin-top: var(--space-xs);
    }

    .form-input {
      width: 100%;
      padding: 12px 14px;
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      background: var(--bg-input);
      color: var(--text-primary);
      transition: all 0.2s;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--brand-500);
      box-shadow: 0 0 0 3px var(--brand-100);
    }

    [data-theme="dark"] .form-input:focus {
      box-shadow: 0 0 0 3px var(--brand-800);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form-select {
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 12px center;
      padding-right: 40px;
    }

    .form-row {
      display: grid;
      grid-template-columns: 1fr;
      gap: var(--space-lg);
    }

    @media (min-width: 640px) {
      .form-row {
        grid-template-columns: 1fr 1fr;
      }
    }

    .form-actions {
      display: flex;
      gap: var(--space-md);
      justify-content: flex-end;
      padding-top: var(--space-lg);
      border-top: 1px solid var(--border);
      margin-top: var(--space-lg);
    }

    .btn-primary {
      background: var(--brand-600);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s;
    }

    .btn-primary:hover {
      background: var(--brand-700);
    }

    .btn-cancel {
      background: transparent;
      color: var(--text-secondary);
      border: none;
      padding: 12px 24px;
      border-radius: var(--radius-md);
      font-family: var(--font-body);
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
    }

    .btn-cancel:hover {
      color: var(--text-primary);
    }

    /* Principles */
    .principles-grid {
      display: grid;
      gap: var(--space-lg);
    }

    .principle-card {
      background: var(--bg-card);
      border-radius: var(--radius-lg);
      border: 1px solid var(--border);
      overflow: hidden;
    }

    .principle-accent {
      height: 4px;
      background: var(--brand-500);
    }

    .principle-content {
      padding: var(--space-lg);
    }

    .principle-number {
      font-family: var(--font-mono);
      font-size: 12px;
      color: var(--brand-600);
      margin-bottom: var(--space-sm);
    }

    [data-theme="dark"] .principle-number {
      color: var(--brand-400);
    }

    .principle-title {
      font-family: var(--font-display);
      font-size: 18px;
      font-weight: 700;
      margin-bottom: var(--space-sm);
    }

    .principle-description {
      font-size: 14px;
      color: var(--text-secondary);
      line-height: 1.6;
    }

    /* Mobile Nav */
    .mobile-nav {
      display: flex;
      background: var(--base-800);
      border-top: 1px solid var(--base-700);
      position: sticky;
      bottom: 0;
    }

    @media (min-width: 768px) {
      .mobile-nav {
        display: none;
      }
    }

    .mobile-nav-btn {
      flex: 1;
      background: none;
      border: none;
      padding: 12px 8px;
      color: var(--base-400);
      font-size: 11px;
      font-family: var(--font-body);
      cursor: pointer;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
    }

    .mobile-nav-btn.active {
      color: var(--brand-400);
    }

    .mobile-nav-icon {
      font-size: 20px;
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: var(--space-2xl);
      color: var(--text-muted);
    }

    .empty-icon {
      font-size: 48px;
      margin-bottom: var(--space-md);
    }

    .empty-title {
      font-size: 16px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: var(--space-sm);
    }

    .empty-text {
      font-size: 14px;
      margin-bottom: var(--space-lg);
    }

    /* Toast */
    .toast {
      position: fixed;
      bottom: 80px;
      left: 50%;
      transform: translateX(-50%) translateY(100px);
      background: var(--base-800);
      color: var(--base-50);
      padding: var(--space-md) var(--space-lg);
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 500;
      box-shadow: var(--shadow-lg);
      opacity: 0;
      transition: all 0.3s;
      z-index: 1000;
    }

    .toast.visible {
      transform: translateX(-50%) translateY(0);
      opacity: 1;
    }

    @media (min-width: 768px) {
      .toast {
        bottom: 32px;
      }
    }
  </style>
</head>
<body>
  <div class="app">
    <header class="header">
      <div class="accent-bar"></div>
      <div class="header-content">
        <div class="logo" onclick="navigate('dashboard')">
          <div class="logo-mark">F</div>
          <span class="logo-text">Foundation</span>
        </div>

        <nav class="header-nav">
          <button class="nav-btn active" data-view="dashboard">Dashboard</button>
          <button class="nav-btn" data-view="decisions">Decisions</button>
          <button class="nav-btn" data-view="principles">Principles</button>
        </nav>

        <div class="header-actions">
          <button class="icon-btn" onclick="toggleTheme()" title="Toggle theme">‚òÄÔ∏è</button>
          <button class="btn-new" onclick="navigate('new')">
            <span>+</span>
            <span>New</span>
          </button>
        </div>
      </div>
    </header>

    <main class="main">
      <div class="container">
        <!-- Dashboard View -->
        <div class="view active" id="view-dashboard">
          <div class="page-header">
            <h1 class="page-title">Dashboard</h1>
            <p class="page-subtitle">Track your engineering decisions and learnings</p>
          </div>

          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-value" id="stat-total">0</div>
              <div class="stat-label">Total Decisions</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="stat-accepted">0</div>
              <div class="stat-label">Accepted</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="stat-proposed">0</div>
              <div class="stat-label">Proposed</div>
            </div>
            <div class="stat-card">
              <div class="stat-value" id="stat-categories">0</div>
              <div class="stat-label">Categories</div>
            </div>
          </div>

          <div class="section-header">
            <h2 class="section-title">Recent Decisions</h2>
            <a class="section-link" onclick="navigate('decisions')">View all ‚Üí</a>
          </div>

          <div class="decision-list" id="recent-decisions"></div>
        </div>

        <!-- Decisions List View -->
        <div class="view" id="view-decisions">
          <div class="page-header">
            <h1 class="page-title">Decisions</h1>
            <p class="page-subtitle">Architecture Decision Records (ADRs)</p>
          </div>

          <div class="search-bar">
            <div class="search-input-wrapper">
              <span class="search-icon">üîç</span>
              <input type="text" class="search-input" id="search-input" placeholder="Search decisions...">
            </div>
            <select class="filter-select" id="filter-status">
              <option value="">All Status</option>
              <option value="proposed">Proposed</option>
              <option value="accepted">Accepted</option>
              <option value="deprecated">Deprecated</option>
              <option value="superseded">Superseded</option>
            </select>
            <select class="filter-select" id="filter-category">
              <option value="">All Categories</option>
            </select>
          </div>

          <div class="decision-list" id="all-decisions"></div>
        </div>

        <!-- Decision Detail View -->
        <div class="view" id="view-detail">
          <div class="detail-header">
            <a class="detail-back" onclick="navigate('decisions')">‚Üê Back to decisions</a>
            <div class="detail-title-row">
              <h1 class="detail-title" id="detail-title"></h1>
              <div class="detail-actions">
                <button class="btn-secondary" onclick="editDecision()">Edit</button>
              </div>
            </div>
            <div class="detail-meta">
              <span class="status-badge" id="detail-status"></span>
              <span class="detail-meta-item" id="detail-id"></span>
              <span class="detail-meta-item" id="detail-date"></span>
            </div>
          </div>

          <div class="detail-body" id="detail-body"></div>
        </div>

        <!-- New Decision View -->
        <div class="view" id="view-new">
          <div class="page-header">
            <h1 class="page-title">New Decision</h1>
            <p class="page-subtitle">Document an architecture decision</p>
          </div>

          <div class="form-card">
            <div class="form-accent"></div>
            <div class="form-content">
              <form id="decision-form" onsubmit="saveDecision(event)">
                <div class="form-group">
                  <label class="form-label">Title *</label>
                  <input type="text" class="form-input" id="form-title" placeholder="e.g., Use PostgreSQL for primary database" required>
                </div>

                <div class="form-row">
                  <div class="form-group">
                    <label class="form-label">Status</label>
                    <select class="form-input form-select" id="form-status">
                      <option value="proposed">Proposed</option>
                      <option value="accepted">Accepted</option>
                      <option value="deprecated">Deprecated</option>
                      <option value="superseded">Superseded</option>
                    </select>
                  </div>
                  <div class="form-group">
                    <label class="form-label">Category</label>
                    <input type="text" class="form-input" id="form-category" placeholder="e.g., Database, API, Security">
                  </div>
                </div>

                <div class="form-group">
                  <label class="form-label">Context *</label>
                  <textarea class="form-input form-textarea" id="form-context" placeholder="What is the issue that we're seeing that is motivating this decision?" required></textarea>
                  <p class="form-hint">Describe the background and forces at play</p>
                </div>

                <div class="form-group">
                  <label class="form-label">Decision *</label>
                  <textarea class="form-input form-textarea" id="form-decision" placeholder="What is the change that we're proposing and/or doing?" required></textarea>
                  <p class="form-hint">The decision that was made</p>
                </div>

                <div class="form-group">
                  <label class="form-label">Consequences</label>
                  <textarea class="form-input form-textarea" id="form-consequences" placeholder="What becomes easier or more difficult because of this decision?"></textarea>
                  <p class="form-hint">Both positive and negative outcomes</p>
                </div>

                <div class="form-group">
                  <label class="form-label">Alternatives Considered</label>
                  <textarea class="form-input form-textarea" id="form-alternatives" placeholder="What other options were considered?"></textarea>
                </div>

                <div class="form-actions">
                  <button type="button" class="btn-cancel" onclick="navigate('decisions')">Cancel</button>
                  <button type="submit" class="btn-primary">Save Decision</button>
                </div>
              </form>
            </div>
          </div>
        </div>

        <!-- Principles View -->
        <div class="view" id="view-principles">
          <div class="page-header">
            <h1 class="page-title">Principles</h1>
            <p class="page-subtitle">Guiding principles for engineering decisions</p>
          </div>

          <div class="principles-grid" id="principles-list"></div>
        </div>
      </div>
    </main>

    <!-- Mobile Navigation -->
    <nav class="mobile-nav">
      <button class="mobile-nav-btn active" data-view="dashboard">
        <span class="mobile-nav-icon">üìä</span>
        <span>Dashboard</span>
      </button>
      <button class="mobile-nav-btn" data-view="decisions">
        <span class="mobile-nav-icon">üìã</span>
        <span>Decisions</span>
      </button>
      <button class="mobile-nav-btn" data-view="new">
        <span class="mobile-nav-icon">‚ûï</span>
        <span>New</span>
      </button>
      <button class="mobile-nav-btn" data-view="principles">
        <span class="mobile-nav-icon">üí°</span>
        <span>Principles</span>
      </button>
    </nav>

    <!-- Toast -->
    <div class="toast" id="toast"></div>
  </div>

  <script>
    // Sample Data
    const sampleDecisions = [
      {
        id: 'ADR-001',
        title: 'Use PostgreSQL as primary database',
        status: 'accepted',
        category: 'Database',
        date: '2025-12-20',
        context: 'We need a reliable, scalable database for our application. The team has experience with both PostgreSQL and MySQL. We expect complex queries and need strong ACID compliance.',
        decision: 'We will use PostgreSQL as our primary database. It offers excellent performance, robust feature set, and strong community support.',
        consequences: 'Positive: Strong typing, excellent JSON support, great for complex queries. Negative: Slightly higher memory usage compared to MySQL, team needs to learn PostgreSQL-specific features.',
        alternatives: 'MySQL: More familiar to some team members but weaker JSON support. MongoDB: Good for unstructured data but we need ACID compliance. SQLite: Too limited for production scale.'
      },
      {
        id: 'ADR-002',
        title: 'Adopt REST API with OpenAPI specification',
        status: 'accepted',
        category: 'API',
        date: '2025-12-18',
        context: 'We need to define our API strategy. Multiple clients will consume our API including web, mobile, and third-party integrations.',
        decision: 'We will use REST architecture with OpenAPI 3.0 specification for all public APIs. GraphQL may be considered for specific use cases later.',
        consequences: 'Positive: Wide tooling support, easy to understand and debug, great documentation with OpenAPI. Negative: May require multiple endpoints for complex data fetching.',
        alternatives: 'GraphQL: More flexible but higher learning curve. gRPC: Better performance but less browser-friendly.'
      },
      {
        id: 'ADR-003',
        title: 'Implement feature flags for gradual rollouts',
        status: 'accepted',
        category: 'DevOps',
        date: '2025-12-15',
        context: 'We need to ship features faster while maintaining stability. Currently, all features go live at once during deployments.',
        decision: 'Implement feature flags using a dedicated service. Start with LaunchDarkly for enterprise features, with fallback to simple config-based flags.',
        consequences: 'Positive: Safer deployments, A/B testing capability, quick rollback. Negative: Added complexity, potential flag debt, cost of third-party service.',
        alternatives: 'Environment variables: Simple but requires redeploy. Custom solution: Full control but significant development effort.'
      },
      {
        id: 'ADR-004',
        title: 'Use TypeScript for all new frontend code',
        status: 'accepted',
        category: 'Frontend',
        date: '2025-12-10',
        context: 'Our JavaScript codebase is growing and becoming harder to maintain. Type-related bugs are increasing as the team scales.',
        decision: 'All new frontend code must be written in TypeScript with strict mode enabled. Existing JavaScript files will be migrated gradually.',
        consequences: 'Positive: Better IDE support, catch bugs early, improved documentation. Negative: Learning curve for team members new to TypeScript, initial slower development.',
        alternatives: 'Flow: Similar benefits but smaller community. JSDoc: No runtime changes but less powerful. Stay with JavaScript: Faster initially but more bugs long-term.'
      },
      {
        id: 'ADR-005',
        title: 'Evaluate microservices for user authentication',
        status: 'proposed',
        category: 'Architecture',
        date: '2025-12-24',
        context: 'Our monolithic auth system is becoming a bottleneck. Multiple teams need to modify auth logic, causing merge conflicts and deployment delays.',
        decision: 'Extract authentication into a separate microservice with its own database. Use OAuth 2.0 / OpenID Connect for standardization.',
        consequences: 'Positive: Independent scaling, clearer ownership, industry-standard protocols. Negative: Network latency, operational complexity, need for service mesh.',
        alternatives: 'Keep in monolith: Less complexity but scaling issues persist. Buy vs build: Use Auth0/Okta but less control and higher cost at scale.'
      }
    ];

    const principles = [
      {
        number: 1,
        title: 'Foundation before speed',
        description: 'Real speed comes from clarity, not from typing faster. Invest in understanding before rushing to implement.'
      },
      {
        number: 2,
        title: 'Document the why, not just the what',
        description: 'Code shows what we built. Documentation should explain why we made those choices. Future maintainers need context.'
      },
      {
        number: 3,
        title: 'Maintenance costs more than building',
        description: 'Every shortcut in building becomes a tax on every future change. Optimize for long-term maintainability.'
      },
      {
        number: 4,
        title: 'Build for the people who come after',
        description: 'The engineer who maintains your code in 10 years is your real customer. Write code they can understand and modify.'
      },
      {
        number: 5,
        title: 'Simple beats clever',
        description: 'Clever solutions impress today but confuse tomorrow. Choose boring technology and straightforward patterns.'
      },
      {
        number: 6,
        title: 'Decisions are trade-offs',
        description: 'There are no perfect solutions, only trade-offs. Document what you gained and what you gave up.'
      }
    ];

    // State
    let decisions = [];
    let currentView = 'dashboard';
    let currentDecisionId = null;

    // Initialize
    function init() {
      loadDecisions();
      renderPrinciples();
      setupEventListeners();
      updateStats();
      renderRecentDecisions();
      renderAllDecisions();
      updateCategoryFilter();
    }

    // Storage
    function loadDecisions() {
      const stored = localStorage.getItem('foundation-decisions');
      if (stored) {
        decisions = JSON.parse(stored);
      } else {
        decisions = [...sampleDecisions];
        saveDecisions();
      }
    }

    function saveDecisions() {
      localStorage.setItem('foundation-decisions', JSON.stringify(decisions));
    }

    // Navigation
    function navigate(view, decisionId = null) {
      currentView = view;
      currentDecisionId = decisionId;

      document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
      document.querySelectorAll('.nav-btn, .mobile-nav-btn').forEach(b => b.classList.remove('active'));

      if (view === 'detail' && decisionId) {
        document.getElementById('view-detail').classList.add('active');
        renderDecisionDetail(decisionId);
      } else {
        document.getElementById(`view-${view}`).classList.add('active');
        document.querySelectorAll(`[data-view="${view}"]`).forEach(b => b.classList.add('active'));
      }

      if (view === 'decisions') {
        renderAllDecisions();
      }

      window.scrollTo(0, 0);
    }

    function setupEventListeners() {
      // Nav buttons
      document.querySelectorAll('.nav-btn, .mobile-nav-btn').forEach(btn => {
        btn.addEventListener('click', () => {
          navigate(btn.dataset.view);
        });
      });

      // Search and filters
      document.getElementById('search-input').addEventListener('input', renderAllDecisions);
      document.getElementById('filter-status').addEventListener('change', renderAllDecisions);
      document.getElementById('filter-category').addEventListener('change', renderAllDecisions);
    }

    // Theme
    function toggleTheme() {
      const body = document.body;
      const btn = document.querySelector('.icon-btn');
      if (body.getAttribute('data-theme') === 'dark') {
        body.removeAttribute('data-theme');
        btn.textContent = '‚òÄÔ∏è';
      } else {
        body.setAttribute('data-theme', 'dark');
        btn.textContent = 'üåô';
      }
    }

    // Stats
    function updateStats() {
      document.getElementById('stat-total').textContent = decisions.length;
      document.getElementById('stat-accepted').textContent = decisions.filter(d => d.status === 'accepted').length;
      document.getElementById('stat-proposed').textContent = decisions.filter(d => d.status === 'proposed').length;

      const categories = [...new Set(decisions.map(d => d.category).filter(Boolean))];
      document.getElementById('stat-categories').textContent = categories.length;
    }

    // Render Decision Card
    function renderDecisionCard(decision, compact = false) {
      return `
        <div class="decision-card" onclick="navigate('detail', '${decision.id}')">
          <div class="decision-accent"></div>
          <div class="decision-content">
            <div class="decision-header">
              <div>
                <div class="decision-id">${decision.id}</div>
                <div class="decision-title">${decision.title}</div>
              </div>
              <span class="status-badge status-${decision.status}">${decision.status}</span>
            </div>
            ${!compact ? `<div class="decision-summary">${decision.context}</div>` : ''}
            <div class="decision-meta">
              <span class="decision-date">üìÖ ${formatDate(decision.date)}</span>
              ${decision.category ? `<span class="tag tag-category">${decision.category}</span>` : ''}
            </div>
          </div>
        </div>
      `;
    }

    // Render Recent Decisions
    function renderRecentDecisions() {
      const container = document.getElementById('recent-decisions');
      const recent = [...decisions].sort((a, b) => new Date(b.date) - new Date(a.date)).slice(0, 3);

      if (recent.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üìã</div>
            <div class="empty-title">No decisions yet</div>
            <div class="empty-text">Start documenting your architecture decisions</div>
            <button class="btn-primary" onclick="navigate('new')">Create First Decision</button>
          </div>
        `;
      } else {
        container.innerHTML = recent.map(d => renderDecisionCard(d)).join('');
      }
    }

    // Render All Decisions
    function renderAllDecisions() {
      const container = document.getElementById('all-decisions');
      const searchTerm = document.getElementById('search-input').value.toLowerCase();
      const statusFilter = document.getElementById('filter-status').value;
      const categoryFilter = document.getElementById('filter-category').value;

      let filtered = [...decisions];

      if (searchTerm) {
        filtered = filtered.filter(d =>
          d.title.toLowerCase().includes(searchTerm) ||
          d.context.toLowerCase().includes(searchTerm) ||
          d.id.toLowerCase().includes(searchTerm)
        );
      }

      if (statusFilter) {
        filtered = filtered.filter(d => d.status === statusFilter);
      }

      if (categoryFilter) {
        filtered = filtered.filter(d => d.category === categoryFilter);
      }

      filtered.sort((a, b) => new Date(b.date) - new Date(a.date));

      if (filtered.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-icon">üîç</div>
            <div class="empty-title">No decisions found</div>
            <div class="empty-text">Try adjusting your search or filters</div>
          </div>
        `;
      } else {
        container.innerHTML = filtered.map(d => renderDecisionCard(d)).join('');
      }
    }

    // Update Category Filter
    function updateCategoryFilter() {
      const select = document.getElementById('filter-category');
      const categories = [...new Set(decisions.map(d => d.category).filter(Boolean))].sort();

      select.innerHTML = '<option value="">All Categories</option>' +
        categories.map(c => `<option value="${c}">${c}</option>`).join('');
    }

    // Render Decision Detail
    function renderDecisionDetail(id) {
      const decision = decisions.find(d => d.id === id);
      if (!decision) {
        navigate('decisions');
        return;
      }

      document.getElementById('detail-title').textContent = decision.title;
      document.getElementById('detail-status').textContent = decision.status;
      document.getElementById('detail-status').className = `status-badge status-${decision.status}`;
      document.getElementById('detail-id').innerHTML = `üè∑Ô∏è ${decision.id}`;
      document.getElementById('detail-date').innerHTML = `üìÖ ${formatDate(decision.date)}`;

      const body = document.getElementById('detail-body');
      body.innerHTML = `
        <div class="detail-section">
          <div class="detail-section-title">Context</div>
          <div class="detail-section-content">
            <p>${decision.context}</p>
          </div>
        </div>
        <div class="detail-section">
          <div class="detail-section-title">Decision</div>
          <div class="detail-section-content">
            <p>${decision.decision}</p>
          </div>
        </div>
        ${decision.consequences ? `
          <div class="detail-section">
            <div class="detail-section-title">Consequences</div>
            <div class="detail-section-content">
              <p>${decision.consequences}</p>
            </div>
          </div>
        ` : ''}
        ${decision.alternatives ? `
          <div class="detail-section">
            <div class="detail-section-title">Alternatives Considered</div>
            <div class="detail-section-content">
              <p>${decision.alternatives}</p>
            </div>
          </div>
        ` : ''}
        ${decision.category ? `
          <div class="detail-section">
            <div class="detail-section-title">Related Decisions</div>
            <div class="detail-section-content">
              <div class="related-decisions">
                ${getRelatedDecisions(decision).map(r => `
                  <a class="related-link" onclick="navigate('detail', '${r.id}')">
                    <span class="related-id">${r.id}</span>
                    <span>${r.title}</span>
                  </a>
                `).join('') || '<p>No related decisions found</p>'}
              </div>
            </div>
          </div>
        ` : ''}
      `;
    }

    // Get Related Decisions
    function getRelatedDecisions(decision) {
      return decisions
        .filter(d => d.id !== decision.id && d.category === decision.category)
        .slice(0, 3);
    }

    // Render Principles
    function renderPrinciples() {
      const container = document.getElementById('principles-list');
      container.innerHTML = principles.map(p => `
        <div class="principle-card">
          <div class="principle-accent"></div>
          <div class="principle-content">
            <div class="principle-number">Principle ${p.number}</div>
            <div class="principle-title">${p.title}</div>
            <div class="principle-description">${p.description}</div>
          </div>
        </div>
      `).join('');
    }

    // Save Decision
    function saveDecision(event) {
      event.preventDefault();

      const newDecision = {
        id: `ADR-${String(decisions.length + 1).padStart(3, '0')}`,
        title: document.getElementById('form-title').value,
        status: document.getElementById('form-status').value,
        category: document.getElementById('form-category').value,
        date: new Date().toISOString().split('T')[0],
        context: document.getElementById('form-context').value,
        decision: document.getElementById('form-decision').value,
        consequences: document.getElementById('form-consequences').value,
        alternatives: document.getElementById('form-alternatives').value
      };

      decisions.unshift(newDecision);
      saveDecisions();
      updateStats();
      updateCategoryFilter();
      renderRecentDecisions();

      // Reset form
      document.getElementById('decision-form').reset();

      // Show toast and navigate
      showToast('Decision saved successfully');
      navigate('detail', newDecision.id);
    }

    // Edit Decision (placeholder)
    function editDecision() {
      showToast('Edit functionality coming soon');
    }

    // Toast
    function showToast(message) {
      const toast = document.getElementById('toast');
      toast.textContent = message;
      toast.classList.add('visible');
      setTimeout(() => {
        toast.classList.remove('visible');
      }, 3000);
    }

    // Format Date
    function formatDate(dateStr) {
      const date = new Date(dateStr);
      return date.toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' });
    }

    // Initialize app
    init();
  </script>
</body>
</html>
